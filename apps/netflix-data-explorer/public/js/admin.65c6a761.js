(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["admin"],{"0ecf":function(e,s,t){e.exports={adminView:"AdminView_adminView_1vigs"}},"89b3":function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"full-height layout vertical",class:e.$style.adminView,attrs:{"element-loading-text":"Loading Application Status..."}},[t("el-form",{staticClass:"spacer__top padded",attrs:{inline:""}},[t("el-form-item",{attrs:{label:"Current Environment"}},[t("el-input",{attrs:{value:e.currentEnv,disabled:""}})],1),t("el-form-item",{attrs:{label:"Current Region"}},[t("el-input",{attrs:{value:e.currentRegion,disabled:""}})],1),t("el-form-item",{attrs:{label:"Discovery Status"}},[t("el-input",{attrs:{value:e.discoveryStatus,disabled:""}})],1),t("el-form-item",{attrs:{label:"ACL Status"}},[t("el-input",{attrs:{value:e.aclStatus,disabled:""}})],1)],1),t("el-tabs",{attrs:{type:"border-card"},model:{value:e.selectedTab,callback:function(s){e.selectedTab=s},expression:"selectedTab"}},[t("el-tab-pane",{attrs:{name:e.TabNames.DiscoveredClusters,label:"Discovered Clusters"}}),t("el-tab-pane",{attrs:{name:e.TabNames.Nodes,label:"Nodes"}}),t("el-tab-pane",{attrs:{name:e.TabNames.ClusterAcls,label:"Cluster ACLs"}}),t("el-tab-pane",{attrs:{name:e.TabNames.EntityAcls,label:"Entity ACLs"}}),t("el-tab-pane",{attrs:{name:e.TabNames.Users,label:"Users"}})],1),t("v-client-table",{directives:[{name:"show",rawName:"v-show",value:e.selectedTab===e.TabNames.DiscoveredClusters,expression:"selectedTab === TabNames.DiscoveredClusters"}],staticClass:"flex scroll",attrs:{data:e.discoveredClusters,columns:e.discoveredClustersTableColumns,options:e.discoveredClustersTableOptions},scopedSlots:e._u([{key:"hasConnection",fn:function(s){return[e._v(" "+e._s(s.row.hasConnection)+" ")]}}])}),t("v-client-table",{directives:[{name:"show",rawName:"v-show",value:e.selectedTab===e.TabNames.Nodes,expression:"selectedTab === TabNames.Nodes"}],staticClass:"flex scroll",attrs:{data:e.nodes,columns:e.nodesTableColumns,options:e.nodesTableOptions},scopedSlots:e._u([{key:"hasConnection",fn:function(s){return[e._v(" "+e._s(s.row.hasConnection)+" ")]}}])}),t("v-client-table",{directives:[{name:"show",rawName:"v-show",value:e.selectedTab===e.TabNames.ClusterAcls,expression:"selectedTab === TabNames.ClusterAcls"}],staticClass:"flex scroll",attrs:{data:e.clusterAcls,columns:e.aclTableColumns,options:e.aclTableOptions},scopedSlots:e._u([{key:"isShared",fn:function(s){return[e._v(" "+e._s(s.row.isShared)+" ")]}},{key:"owners",fn:function(s){return[e._v(" "+e._s(s.row.owners.join(", "))+" ")]}}])}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.selectedTab===e.TabNames.EntityAcls,expression:"selectedTab === TabNames.EntityAcls"}],staticClass:"toolbar"},[t("el-button",{attrs:{type:"primary"},on:{click:function(s){return e.fetchData(!0)}}},[e._v("Force Cache Refresh")])],1),t("v-client-table",{directives:[{name:"show",rawName:"v-show",value:e.selectedTab===e.TabNames.EntityAcls,expression:"selectedTab === TabNames.EntityAcls"}],staticClass:"flex scroll",attrs:{data:e.entityAcls,columns:e.entityAclsTableColumns,options:e.entityAclsTableOptions},scopedSlots:e._u([{key:"owners",fn:function(s){return[e._v(" "+e._s(s.row.owners.join(", "))+" ")]}}])}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.selectedTab===e.TabNames.Users,expression:"selectedTab === TabNames.Users"}],staticClass:"layout horizontal flex"},[t("v-client-table",{staticClass:"flex scroll",attrs:{data:e.users,columns:e.userTableColumns,options:e.userTableOptions},on:{"row-click":e.onSelectUser}}),t("v-client-table",{staticClass:"flex-2 scroll",attrs:{data:e.selectedGroups,columns:e.userGroupsColumns,options:e.userGroupsOptions}})],1)],1)},n=[],l=t("dd87"),r=t.n(l),i=t("72aa"),o=t.n(i),c=t("f3ad"),u=t.n(c),d=t("3787"),m=t.n(d),b=t("4105"),p=t.n(b),v=t("eedf"),h=t.n(v),C=t("2b0e"),T=t("38cd");async function f(e=!1){const s=await Object(T["a"])().get("/REST/admin/status?refresh="+e);return s.data}var y,w=t("9ebe");C["default"].use(w["ClientTable"]),function(e){e["DiscoveredClusters"]="DiscoveredClusters",e["Nodes"]="Nodes",e["ClusterAcls"]="ClusterAcls",e["EntityAcls"]="EntityAcls",e["Users"]="Users"}(y||(y={}));var N=C["default"].extend({name:"AdminView",components:{[h.a.name]:h.a,[p.a.name]:p.a,[m.a.name]:m.a,[u.a.name]:u.a,[o.a.name]:o.a,[r.a.name]:r.a},data(){return{TabNames:y,isLoading:!1,selectedTab:y.DiscoveredClusters,adminStatus:void 0,discoveredClustersTableColumns:["datastoreType","name","env","region","hasConnection"],discoveredClustersTableOptions:{filterByColumn:!0,perPage:100,headings:{datastoreType:"Datastore type",hasConnection:"Connected?"}},nodesTableColumns:["datastoreType","name","env","region","ip","status","hasConnection"],nodesTableOptions:{filterByColumn:!0,perPage:100,headings:{datastoreType:"Datastore type",hasConnection:"Connected?"}},aclTableColumns:["name","isShared","owners"],aclTableOptions:{filterByColumn:!0,perPage:100,headings:{name:"Cluster Name",isShared:"Shared"}},entityAclsTableColumns:["clusterName","type","name","owners"],entityAclsTableOptions:{filterByColumn:!0,perPage:100,headings:{clusterName:"Cluster Name"}},userTableColumns:["email"],userTableOptions:{filterByColumn:!0,perPage:100},selectedGroups:[],userGroupsColumns:["group"],userGroupsOptions:{filterByColumn:!0,perPage:100}}},computed:{discoveredClusters(){return this.adminStatus?[...Object.values(this.adminStatus.available.clusters)].flat():[]},clusterAcls(){return this.adminStatus?Object.values(this.adminStatus.acl):[]},entityAcls(){return this.adminStatus?Object.values(this.adminStatus.cache):[]},users(){return this.adminStatus?this.adminStatus.userCache:[]},currentEnv(){return this.adminStatus?this.adminStatus.currentEnv:"N/A"},currentRegion(){return this.adminStatus?this.adminStatus.currentRegion:"N/A"},discoveryStatus(){return this.adminStatus?this.adminStatus.state.discovery:"N/A"},aclStatus(){return this.adminStatus?this.adminStatus.state.acl:"N/A"},nodes(){return this.adminStatus?Object.entries(this.adminStatus.available.clusters).reduce((e,[s,t])=>(t.forEach(t=>{const{name:a,env:n,region:l,hasConnection:r,instances:i}=t;i.forEach(({ip:t,status:i})=>{e.push({datastoreType:s,name:a,env:n,region:l,hasConnection:r,ip:t,status:i})})}),e),new Array):[]}},created(){this.fetchData(!1)},methods:{async fetchData(e){try{this.isLoading=!0,this.adminStatus=Object.freeze(await f(e))}finally{this.isLoading=!1}},onSelectUser(e){const s=e.row;this.selectedGroups=s.groups.sort().map(e=>({group:e}))}}}),S=N,g=t("c6cd0"),A=t("2877");function _(e){this["$style"]=g["default"].locals||g["default"]}var x=Object(A["a"])(S,a,n,!1,_,null,null);s["default"]=x.exports},c6cd0:function(e,s,t){"use strict";var a=t("0ecf"),n=t.n(a);t.d(s,"default",(function(){return n.a}))}}]);
//# sourceMappingURL=admin.65c6a761.js.map